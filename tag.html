<head>
  <title>tag</title>
</head>

<body>
	<div class="container">
		<div class="row-fluid">
			<div id="login" class="span12">
		  	{{> login}}
		  </div>
		</div>
		{{> main}}
	</div>
</body>

<template name="login">
	{{#if loggedIn}}
		<div class="row-fluid">
			<div class="span9">
				<h1>
					You are {{loggedInUser}}
				</h1>
				{{> tag_breakdown}}
			</div>
			<div class="span3">
				<div id="loggedInSymbol" style="background-image: url(http://www.tagged.com/imgsrv.php?sz=1&uid={{loggedInUID}})">
					<h1>{{score}}</h1>
				</div>
			</div>
		</div>
	{{else}}
		<h2>
			Click a picture to begin playing on a guest account
			<ul class="login_options inline unstyled">
				{{#each options}}
					{{> login_option}}
				{{/each}}
			</ul>
			Or enter your Tagged userID
			<br>
			<input id="login-id" type="text" value="Tagged UserID">
			<input id="login-name" type="text" value="Nickname">
			<button class="do-login">
				Login
			</button>
		</h2>
  {{/if}}
</template>

<template name="login_option">
	<li class="login_option" data-username="{{this.username}}">
		<img src="http://www.tagged.com/imgsrv.php?sz=1&uid={{this.userId}}">
		</img>
	</li>
</template>

<template name="tag_breakdown">
	<p class="lead tag-breakdown">
		<ul class="unstyled inline" style="margin-left:20px">
			{{#each tags}}
				{{> tag_snippet}}
			{{/each}}
		</ul>
	<p>
</template>

<template name="tag_snippet">
		{{this.value}} ({{this.count}})
</template>

<template name="tag_toast">
	<h2>Tag Notifications</h2>
	<ul class="unstyled">
		{{#each tags}}
			{{> tag_toast_item}}
		{{/each}}
	</ul>
	{{> addTagModal}}
</template>

<template name="tagActions">
	<h2>Actions</h2>
	<a href="#addTagModal" id="openAddTagModal" role="button" class="btn" data-toggle="modal">
		Add a new Tag
	</a>
</template>

<template name="addTagModal">
	<div id="addTagModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
			<h3>Add a new Tag</h3>
		</div>
		<div class="modal-body">
			Tag <input id="addTagPlayer" type="text" value="Joe"> as <input id="addTagTag" type="text" value="Awesome">
			<br><br><br><br><br><br><br>
		</div>
		<div class="modal-footer">
			<button class="btn closeModal" data-dismiss="modal" aria-hidden="true">Close</button>
			<button id="addNewTag" class="btn btn-primary">Tag</button>
		</div>
	</div>
</template>

<template name="tag_toast_item">
	<li class="tag-toast-value" data-tagvalue="{{this.value}}">
		{{this.lastTaggedBy}} just tagged you {{this.value}}! {{this.value}} has {{this.timeRemaining}} seconds remaining.
		{{#constant}}
			<button type="button" class="btn btn-default">
				TagBack!
			</button>
		{{/constant}}
	</li>
</template>

<template name="main">
	{{#if loggedIn}}
		<div class="row-fluid">
			<div id="tag-toast" class="span12">
				{{> tag_toast}}
			</div>
		</div>
		<div class="row-fluid">
			<div id="tag-actions" class="span12">
				{{> tagActions}}
			</div>
		</div>
		<div class="row-fluid">
		  <div id="players" class="span4">
		  		{{> active_players}}
		  </div>
		  <div id="leaderboard" class="span8">
		  		{{> leaderboard}}
		  </div>
		</div>
	{{/if}}
</template>

<template name="active_players">
	<h2>Active Players</h2>
	<ul class="unstyled">
		{{#each players}}
			{{> active_player}}
		{{/each}}
	</ul>
</template>

<template name="active_player">
	<li class="active-player" data-username="{{this.username}}">
		<div class="row">
			<div class="span6">
				<div class="active-player-visual" style="background-image: url(http://www.tagged.com/imgsrv.php?sz=1&uid={{this.userId}})">
			<div >{{this.name}}</div>
				</div>
			</div>
			<div class="span6">
				<div class="tagslist btn-group">
				  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
				    Tag <span class="caret"></span>
				  </button>
				  <ul class="dropdown-menu" role="menu">
				  	{{#each tags}}
				  		{{> tag_item}}
				  	{{/each}}
				  	<li class="divider"></li>
				  	<li id="newTag">
				  		<input type="text" value="New tag">
				  		<button class=".btn .btn-default">Tag</button>
				  	</li>
				  </ul>
				</div>
			</div>
		</div>
	</li>
</template>

<template name="tag_item">
	<li data-tagvalue="{{this.value}}" class="tag">
		<a>
				<h5>
					{{#constant}}{{this.value}}{{/constant}} tag expires in {{this.timeRemaining}} seconds
				</h5>
		</a>
	</li>
</template>

<template name="leaderboard">
	<h2>Leaderboard</h2>
	<div class="row-fluid">
		<div class="span6">
			<h3>Players</h3>
			<ul>
				{{#each players}}
					{{> player_rank}}
				{{/each}}
			</ul>
		</div>
		<div class="span6">
			<h3>Tags</h3>
			<ul>
				{{#each tags}}
					{{> tag_rank}}
				{{/each}}
			</ul>
			<h3>Archived Tags</h3>
			<ul>
				{{#each archivedTags}}
					{{> archivedTag_rank}}
				{{/each}}
			</ul>
		</div>
	</div>
</template>

<template name="player_rank">
	<li>{{this.username}} has {{this.score}} points</li>
</template>

<template name="tag_rank">
	<li>{{this.value}} has been tagged {{this.count}} times</li>
</template>

<template name="archivedTag_rank">
	<li>{{this.value}} lasted {{this.timeLasted}} minutes</li>
</template>

